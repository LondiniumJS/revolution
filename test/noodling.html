<html>
	<head>
		<script type="text/javascript" src="extendedData.js">
		</script>
		<script type="text/javascript" src="twitterData.js">
		</script>

		<script type="text/javascript">
      'use strict'

      var authorityMax = Math.max.apply(null, data.map(function(value) {return value.authority;}));
      var frequencyMax = Math.max.apply(null, data.map(function(value) {return value.activity;}));

			var finalArray = createTweeterObject(5);
			console.log(finalArray);

			function createTweeterObject(time){
				var finalArray = [];
				for(var t = 0; t < time; t++){
					// declare some arrays to hold data from .js files
          var timeArray = [];

					for(var i=0; i<data.length; i++){
						var twitterId = parseInt(data[i].twitter.id, 10);

						for (var j = 0; j<twitterData.length; j++){
							if (twitterData[j].id === (twitterId)){

                var tweeterObject = {
                  pro:0,
                  against:0,
                  authority: (data[i].authority / authorityMax),
                  frequency: (data[i].activity / frequencyMax),
                  undecided: twitterData[j].followers_count,
                  name: twitterData[j].name
                };

								break;
							}
						}

						var x = noOfFollowersConverted(tweeterObject);

						timeArray.push(x);
					}
					finalArray.push(timeArray);
				}
				return finalArray;
			}

			function noOfFollowersConverted(result){

				if(result.undecided <= 0){ return result; }

				var authorityWeight = 0.5;
				var frequencyWeight = (1 - authorityWeight);

				var makeDecision = ((result.undecided * result.authority)*authorityWeight + (result.undecided * result.frequency)*frequencyWeight);
        console.log(makeDecision);

        console.log(result.undecided);

				result.undecided -= Math.round(makeDecision);
				result.against += Math.round(makeDecision * (1 - result.authority));
				result.pro += Math.round(makeDecision * (result.authority));

        if (result.undecided < 0 ) result.undecided = 0;
        if (result.against < 0 ) result.against = 0;
        if (result.pro < 0 ) result.pro = 0;
				
				return result;
			}
			
				

			

		</script>
	</head>
</html>


